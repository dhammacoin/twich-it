const translations = {
    en: {
        'nav-features': 'Features',
        'nav-tech': 'Technology',
        'nav-download': 'Download',
        'hero-label': 'Powered by Tinode',
        'hero-title': 'Secure messenger',
        'hero-description': 'Fast and reliable messaging built on Tinode engine with modern Android architecture. End-to-end encryption, real-time delivery, and intuitive interface. Perfect for personal chats and team communication.',
        'btn-download': 'Download APK',
        'btn-github': 'View on GitHub',
        'features-title': 'Modern Messaging',
        'features-subtitle': 'Useful features for everyday communication',
        'feature-1-title': 'Real-time Messaging',
        'feature-1-desc': 'Instant message delivery powered by Tinode\'s WebSocket protocol. No delays, just pure speed.',
        'feature-2-title': 'End-to-End Encryption',
        'feature-2-desc': 'Your conversations stay private. Military-grade encryption ensures your data is secure.',
        'feature-3-title': 'File Sharing',
        'feature-3-desc': 'Share code snippets, documents, and media files. Syntax highlighting for code. Perfect for dev teams and regular users.',
        'feature-4-title': 'Group Chats',
        'feature-4-desc': 'Create channels for teams, projects, or friends. Organize discussions the way you want.',
        'feature-5-title': 'Material Design',
        'feature-5-desc': 'Clean, modern UI following Material Design guidelines. Native Android experience.',
        'feature-6-title': 'Offline Mode',
        'feature-6-desc': 'Access your messages offline. Automatic sync when connection is restored.',
        'tech-label': 'Technology Stack',
        'cta-title': 'Try Twich.IT',
        'cta-description': 'Download for Android and experience secure messaging with a modern approach.',
        'download-button': 'Download for Android',
        'footer-privacy': 'Privacy Policy',
        'footer-terms': 'Terms of Service',
        'footer-docs': 'Documentation',
        'footer-support': 'Support',
        'footer-copyright': 'Â© 2024 Twich.IT Messenger. Built on Tinode engine.',
        'chat-name': 'Dev Team',
        'chat-status': 'â— online',
        'msg-1': 'Hey, deployed the new build ðŸš€',
        'msg-2': 'Perfect! Testing now',
        'msg-3': 'All endpoints working?',
        'msg-4': 'Yep, API response time is great',
        'msg-5': 'Nice! What about the new auth flow?',
        'msg-6': 'Tested it, works smoothly',
        'msg-7': 'Awesome! Ready for production?',
        'msg-8': 'Yeah, let\'s deploy ðŸŽ‰',
        'input-placeholder': 'Type a message...'
    },
    ru: {
        'nav-features': 'Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸',
        'nav-tech': 'Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸',
        'nav-download': 'Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ',
        'hero-label': 'ÐÐ° Ð±Ð°Ð·Ðµ Tinode',
        'hero-title': 'Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€',
        'hero-description': 'Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¸ Ð½Ð°Ð´Ñ‘Ð¶Ð½Ñ‹Ð¹ Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€ Ð½Ð° Ð±Ð°Ð·Ðµ Ð´Ð²Ð¸Ð¶ÐºÐ° Tinode Ñ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Android Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð¾Ð¹. Ð¡ÐºÐ²Ð¾Ð·Ð½Ð¾Ðµ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ, Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ° Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¸ Ð¸Ð½Ñ‚ÑƒÐ¸Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ. Ð˜Ð´ÐµÐ°Ð»ÐµÐ½ Ð´Ð»Ñ Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ‡Ð°Ñ‚Ð¾Ð² Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð³Ð¾ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ.',
        'btn-download': 'Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ APK',
        'btn-github': 'ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð½Ð° GitHub',
        'features-title': 'Ð¡Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€',
        'features-subtitle': 'ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð¿Ð¾Ð²ÑÐµÐ´Ð½ÐµÐ²Ð½Ð¾Ð³Ð¾ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ',
        'feature-1-title': 'Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸',
        'feature-1-desc': 'ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ð°Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð½Ð° Ð±Ð°Ð·Ðµ WebSocket Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð° Tinode. ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð·Ð°Ð´ÐµÑ€Ð¶ÐµÐº, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ð¸ÑÑ‚Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ.',
        'feature-2-title': 'Ð¡ÐºÐ²Ð¾Ð·Ð½Ð¾Ðµ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ',
        'feature-2-desc': 'Ð’Ð°ÑˆÐ¸ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ñ‹ Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¼Ð¸. Ð’Ð¾ÐµÐ½Ð½Ð¾Ðµ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ñ….',
        'feature-3-title': 'ÐžÐ±Ð¼ÐµÐ½ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸',
        'feature-3-desc': 'Ð”ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ Ñ„Ñ€Ð°Ð³Ð¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸ ÐºÐ¾Ð´Ð°, Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸ Ð¸ Ð¼ÐµÐ´Ð¸Ð°Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸. ÐŸÐ¾Ð´ÑÐ²ÐµÑ‚ÐºÐ° ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ° Ð´Ð»Ñ ÐºÐ¾Ð´Ð°. Ð£Ð´Ð¾Ð±Ð½Ð¾ ÐºÐ°Ðº Ð´Ð»Ñ dev-ÐºÐ¾Ð¼Ð°Ð½Ð´, Ñ‚Ð°Ðº Ð¸ Ð´Ð»Ñ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.',
        'feature-4-title': 'Ð“Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ñ‹Ðµ Ñ‡Ð°Ñ‚Ñ‹',
        'feature-4-desc': 'Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÐºÐ°Ð½Ð°Ð»Ñ‹ Ð´Ð»Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´, Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð² Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ·ÐµÐ¹. ÐžÑ€Ð³Ð°Ð½Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÐºÐ°Ðº Ð²Ð°Ð¼ ÑƒÐ´Ð¾Ð±Ð½Ð¾.',
        'feature-5-title': 'Material Design',
        'feature-5-desc': 'Ð§Ð¸ÑÑ‚Ñ‹Ð¹ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð°Ð¼ Material Design. ÐÐ°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Android Ð¾Ð¿Ñ‹Ñ‚.',
        'feature-6-title': 'ÐžÑ„Ð»Ð°Ð¹Ð½ Ñ€ÐµÐ¶Ð¸Ð¼',
        'feature-6-desc': 'Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÑÐ¼ Ð±ÐµÐ· Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ð°. ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸ ÑÐ²ÑÐ·Ð¸.',
        'tech-label': 'Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÑ‚ÐµÐº',
        'cta-title': 'ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Twich.IT',
        'cta-description': 'Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð´Ð»Ñ Android Ð¸ Ð¸ÑÐ¿Ñ‹Ñ‚Ð°Ð¹Ñ‚Ðµ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€ Ñ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¾Ð¼.',
        'download-button': 'Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð´Ð»Ñ Android',
        'footer-privacy': 'ÐŸÐ¾Ð»Ð¸Ñ‚Ð¸ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð´ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸',
        'footer-terms': 'Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ',
        'footer-docs': 'Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ',
        'footer-support': 'ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°',
        'footer-copyright': 'Â© 2024 Twich.IT ÐœÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€. Ð¡Ð¾Ð·Ð´Ð°Ð½ Ð½Ð° Ð´Ð²Ð¸Ð¶ÐºÐµ Tinode.',
        'chat-name': 'ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸',
        'chat-status': 'â— Ð¾Ð½Ð»Ð°Ð¹Ð½',
        'msg-1': 'ÐŸÑ€Ð¸Ð²ÐµÑ‚, Ð·Ð°Ð´ÐµÐ¿Ð»Ð¾Ð¸Ð» Ð½Ð¾Ð²ÑƒÑŽ ÑÐ±Ð¾Ñ€ÐºÑƒ ðŸš€',
        'msg-2': 'ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð¢ÐµÑÑ‚Ð¸Ñ€ÑƒÑŽ ÑÐµÐ¹Ñ‡Ð°Ñ',
        'msg-3': 'Ð’ÑÐµ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚?',
        'msg-4': 'Ð”Ð°, Ð²Ñ€ÐµÐ¼Ñ Ð¾Ñ‚ÐºÐ»Ð¸ÐºÐ° API Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾Ðµ',
        'msg-5': 'ÐšÑ€ÑƒÑ‚Ð¾! Ð ÐºÐ°Ðº Ð½Ð¾Ð²Ñ‹Ð¹ flow Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸?',
        'msg-6': 'ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð», Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ð»Ð°Ð²Ð½Ð¾',
        'msg-7': 'ÐšÐ»Ð°ÑÑ! Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ñƒ?',
        'msg-8': 'Ð”Ð°, Ð´ÐµÐ¿Ð»Ð¾Ð¸Ð¼ ðŸŽ‰',
        'input-placeholder': 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ...'
    }
};

let currentLang = 'en';

function setLanguage(lang) {
    currentLang = lang;
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Update all text elements
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update chat messages
    document.querySelectorAll('[data-chat-i18n]').forEach(element => {
        const key = element.getAttribute('data-chat-i18n');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update placeholder
    const input = document.querySelector('[data-chat-i18n-placeholder]');
    if (input && translations[lang]['input-placeholder']) {
        input.placeholder = translations[lang]['input-placeholder'];
    }
}

function toggleTheme() {
    const phoneScreen = document.getElementById('phoneScreen');
    phoneScreen.classList.toggle('light');
    
    // Update placeholder text based on theme
    const input = document.querySelector('.chat-input');
    const isLight = phoneScreen.classList.contains('light');
    input.placeholder = isLight ? 'Type a message...' : 'Type a message...';
}

function toggleMenu() {
    const nav = document.getElementById('navMenu');
    const burger = document.querySelector('.burger');
    nav.classList.toggle('active');
    burger.classList.toggle('active');
}

function closeMenu() {
    const nav = document.getElementById('navMenu');
    const burger = document.querySelector('.burger');
    nav.classList.remove('active');
    burger.classList.remove('active');
}

// Smooth scroll to sections
document.addEventListener('click', function(e) {
    const target = e.target.closest('a[href^="#"]');
    if (target) {
        e.preventDefault();
        const id = target.getAttribute('href');
        if (id && id !== '#') {
            const section = document.querySelector(id);
            if (section) {
                const headerOffset = 80;
                const elementPosition = section.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
                
                // Close mobile menu if open
                closeMenu();
            }
        }
    }
});

// Close menu when clicking outside
document.addEventListener('click', function(event) {
    const nav = document.getElementById('navMenu');
    const burger = document.querySelector('.burger');
    const isClickInsideNav = nav.contains(event.target);
    const isClickOnBurger = burger.contains(event.target);
    
    if (!isClickInsideNav && !isClickOnBurger && nav.classList.contains('active')) {
        closeMenu();
    }
});

// Animate chat messages with typing indicator
window.addEventListener('DOMContentLoaded', () => {
    const chatContainer = document.getElementById('chatMessages');
    if (!chatContainer) return;
    
    const messages = Array.from(chatContainer.querySelectorAll('.message'));
    const typingIndicator = document.querySelector('.typing-indicator');
    const chatInput = document.querySelector('.chat-input');
    
    // Ð¡ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð²ÑÑ‘ Ð¸Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾
    messages.forEach(msg => {
        msg.style.opacity = '0';
        msg.style.transform = 'translateY(10px)';
        msg.style.display = 'none';
    });
    typingIndicator.style.display = 'none';

    let currentIndex = 0;

    function showNext() {
        if (currentIndex >= messages.length) {
            // Ð’ ÐºÐ¾Ð½Ñ†Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ typing indicator
            setTimeout(() => {
                typingIndicator.style.display = 'flex';
                typingIndicator.style.opacity = '1';
                typingIndicator.style.transform = 'translateY(0)';
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 1000);
            return;
        }

        const currentMessage = messages[currentIndex];
        const isReceived = currentMessage.classList.contains('message-received');
        
        if (isReceived) {
            // Ð’Ð¥ÐžÐ”Ð¯Ð©Ð•Ð• Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð• Ð¾Ñ‚ ÑÐ¾Ð±ÐµÑÐµÐ´Ð½Ð¸ÐºÐ°
            // 1. ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ "Ð¿ÐµÑ‡Ð°Ñ‚Ð°ÐµÑ‚..."
            typingIndicator.style.display = 'flex';
            typingIndicator.style.opacity = '1';
            typingIndicator.style.transform = 'translateY(0)';
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // 2. Ð§ÐµÑ€ÐµÐ· 2 ÑÐµÐºÑƒÐ½Ð´Ñ‹ ÑƒÐ±Ð¸Ñ€Ð°ÐµÐ¼ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð¸ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
            setTimeout(() => {
                typingIndicator.style.display = 'none';
                
                currentMessage.style.display = 'block';
                setTimeout(() => {
                    currentMessage.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                    currentMessage.style.opacity = '1';
                    currentMessage.style.transform = 'translateY(0)';
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                    
                    // 3. ÐŸÐ°ÑƒÐ·Ð° Ð´Ð»Ñ "Ñ‡Ñ‚ÐµÐ½Ð¸Ñ" Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼
                    currentIndex++;
                    setTimeout(showNext, 1000);
                }, 50);
            }, 2000);
            
        } else {
            // Ð˜Ð¡Ð¥ÐžÐ”Ð¯Ð©Ð•Ð• Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð• Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
            // 1. ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð½Ð°Ð±Ð¾Ñ€Ð° Ñ‚ÐµÐºÑÑ‚Ð° Ð² Ð¿Ð¾Ð»Ðµ Ð²Ð²Ð¾Ð´Ð°
            const messageText = currentMessage.textContent.trim();
            let charIndex = 0;
            chatInput.value = '';
            chatInput.placeholder = '';
            
            const typingInterval = setInterval(() => {
                if (charIndex < messageText.length) {
                    chatInput.value += messageText[charIndex];
                    charIndex++;
                } else {
                    clearInterval(typingInterval);
                    
                    // 2. ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ Ð¿Ð°ÑƒÐ·Ð° Ð¿ÐµÑ€ÐµÐ´ "Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹"
                    setTimeout(() => {
                        chatInput.value = '';
                        const lang = currentLang;
                        chatInput.placeholder = translations[lang]['input-placeholder'] || 'Type a message...';
                        
                        // 3. ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð² Ñ‡Ð°Ñ‚Ðµ
                        currentMessage.style.display = 'block';
                        setTimeout(() => {
                            currentMessage.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                            currentMessage.style.opacity = '1';
                            currentMessage.style.transform = 'translateY(0)';
                            chatContainer.scrollTop = chatContainer.scrollHeight;
                            
                            // 4. ÐŸÐ°ÑƒÐ·Ð° Ð´Ð»Ñ "Ñ‡Ñ‚ÐµÐ½Ð¸Ñ" ÑÐ¾Ð±ÐµÑÐµÐ´Ð½Ð¸ÐºÐ¾Ð¼
                            currentIndex++;
                            setTimeout(showNext, 1000);
                        }, 50);
                    }, 400);
                }
            }, 60);
        }
    }

    // Ð—Ð°Ð¿ÑƒÑÐº Ñ‡ÐµÑ€ÐµÐ· IntersectionObserver (ÐºÐ¾Ð³Ð´Ð° Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ Ð²Ð¸Ð´ÐµÐ½)
    const observer = new IntersectionObserver((entries) => {
        if(entries[0].isIntersecting) {
            setTimeout(showNext, 800);
            observer.disconnect();
        }
    }, { threshold: 0.5 });

    const phoneMockup = document.querySelector('.phone-mockup');
    if (phoneMockup) {
        observer.observe(phoneMockup);
    }
});